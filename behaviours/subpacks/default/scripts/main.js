import{world as dr}from"@minecraft/server";import{Direction as j}from"@minecraft/server";var R;(e=>{e.Zero={x:0,y:0,z:0},e.One={x:1,y:1,z:1},e.Up={x:0,y:1,z:0},e.Down={x:0,y:-1,z:0},e.North={x:0,y:0,z:-1},e.South={x:0,y:0,z:1},e.East={x:1,y:0,z:0},e.West={x:-1,y:0,z:0},e.X=e.East,e.Y=e.Up,e.Z=e.South;function t(r){return typeof r=="object"&&"x"in r&&"y"in r&&"z"in r}e.isVector3=t;function o(r,u,x){if(typeof r=="number")return{x:r,y:u??r,z:x??r};if(Array.isArray(r)&&r.length>=3)return{x:r[0],y:r[1],z:r[2]};throw new Error("Invalid input values for vector construction.")}e.from=o;function s(r){switch(r){case"up":return e.Up;case"down":return e.Down;case"north":return e.North;case"south":return e.South;case"east":return e.East;case"west":return e.West}throw new Error("Argument was not of type 'block_face' or 'cardinal_direction'.")}e.fromBlockFace=s;function a(r){return y(r).toLowerCase()}e.toBlockFace=a;function l(r){switch(r){case j.Up:return e.Up;case j.Down:return e.Down;case j.North:return e.North;case j.South:return e.South;case j.East:return e.East;case j.West:return e.West}}e.fromDirection=l;function y(r){let u=nt(r),x=rt(r),D=Math.max(u.x,u.y,u.z);return D===u.x?x.x>=0?j.East:j.West:D===u.y?x.y>=0?j.Up:j.Down:x.z>=0?j.South:j.North}e.toDirection=y;function g(r){return{x:-p(Math.asin(r.y)),y:-p(Math.atan2(r.x,r.z))}}e.toRotation=g;function p(r){return 180*r/Math.PI}function M(r){let{x:u,y:x,z:D}=r;return[u,x,D]}e.toArray=M;function z(r){return M(r).join(" ")}e.toString=z;function b(r){let[u,x,D]=r.split(" ").map(Number);return{x:u,y:x,z:D}}e.parse=b;function L(r){return Number.isNaN(r.x)||Number.isNaN(r.y)||Number.isNaN(r.z)}e.isnan=L;function U(r){return!m(r)}e.isinf=U;function m(r){return Number.isFinite(r.x)&&Number.isFinite(r.y)&&Number.isFinite(r.z)}e.isfinite=m;function T(r,u){return r.x===u.x&&r.y===u.y&&r.z===u.z}e.equal=T;function v(r,u){return{x:Math.min(r.x,u.x),y:Math.min(r.y,u.y),z:Math.min(r.z,u.z)}}e.min=v;function n(r,u){return{x:Math.max(r.x,u.x),y:Math.max(r.y,u.y),z:Math.max(r.z,u.z)}}e.max=n;function E(r,u,x){return{x:Math.min(Math.max(r.x,u.x),x.x),y:Math.min(Math.max(r.y,u.y),x.y),z:Math.min(Math.max(r.z,u.z),x.z)}}e.clamp=E;function q(r){return{x:Math.min(Math.max(r.x,0),1),y:Math.min(Math.max(r.y,0),1),z:Math.min(Math.max(r.z,0),1)}}e.saturate=q;function rt(r){return{x:Math.sign(r.x),y:Math.sign(r.y),z:Math.sign(r.z)}}e.sign=rt;function ft(r){return{x:Math.floor(r.x),y:Math.floor(r.y),z:Math.floor(r.z)}}e.floor=ft;function _(r){return{x:Math.ceil(r.x),y:Math.ceil(r.y),z:Math.ceil(r.z)}}e.ceil=_;function Z(r){return{x:r.x-Math.floor(r.x),y:r.y-Math.floor(r.y),z:r.z-Math.floor(r.z)}}e.frac=Z;function F(r){return{x:Math.round(r.x),y:Math.round(r.y),z:Math.round(r.z)}}e.round=F;function et(r,u){return{x:r.x%u.x,y:r.y%u.y,z:r.z%u.z}}e.mod=et;function mt(r){return{x:-r.x,y:-r.y,z:-r.z}}e.neg=mt;function nt(r){return{x:Math.abs(r.x),y:Math.abs(r.y),z:Math.abs(r.z)}}e.abs=nt;function N(r,...u){for(let x of u)r={x:r.x+x.x,y:r.y+x.y,z:r.z+x.z};return r}e.add=N;function W(r,...u){for(let x of u)r={x:r.x-x.x,y:r.y-x.y,z:r.z-x.z};return r}e.sub=W;function I(r,u){return t(u)?{x:r.x*u.x,y:r.y*u.y,z:r.z*u.z}:{x:r.x*u,y:r.y*u,z:r.z*u}}e.mul=I;function it(r,u){return t(u)?{x:r.x/u.x,y:r.y/u.y,z:r.z/u.z}:{x:r.x/u,y:r.y/u,z:r.z/u}}e.div=it;function yt(r){return{x:Math.sqrt(r.x),y:Math.sqrt(r.y),z:Math.sqrt(r.z)}}e.sqrt=yt;function dt(r){return{x:Math.exp(r.x),y:Math.exp(r.y),z:Math.exp(r.z)}}e.exp=dt;function pt(r){return{x:Math.pow(2,r.x),y:Math.pow(2,r.y),z:Math.pow(2,r.z)}}e.exp2=pt;function gt(r){return{x:Math.log(r.x),y:Math.log(r.y),z:Math.log(r.z)}}e.log=gt;function xt(r){return{x:Math.log2(r.x),y:Math.log2(r.y),z:Math.log2(r.z)}}e.log2=xt;function Mt(r){return{x:Math.log10(r.x),y:Math.log10(r.y),z:Math.log10(r.z)}}e.log10=Mt;function Et(r,u){return t(u)?{x:Math.pow(r.x,u.x),y:Math.pow(r.y,u.y),z:Math.pow(r.z,u.z)}:{x:Math.pow(r.x,u),y:Math.pow(r.y,u),z:Math.pow(r.z,u)}}e.pow=Et;function zt(r){return{x:Math.sin(r.x),y:Math.sin(r.y),z:Math.sin(r.z)}}e.sin=zt;function wt(r){return{x:Math.asin(r.x),y:Math.asin(r.y),z:Math.asin(r.z)}}e.asin=wt;function At(r){return{x:Math.sinh(r.x),y:Math.sinh(r.y),z:Math.sinh(r.z)}}e.sinh=At;function bt(r){return{x:Math.asinh(r.x),y:Math.asinh(r.y),z:Math.asinh(r.z)}}e.asinh=bt;function Rt(r){return{x:Math.cos(r.x),y:Math.cos(r.y),z:Math.cos(r.z)}}e.cos=Rt;function Tt(r){return{x:Math.acos(r.x),y:Math.acos(r.y),z:Math.acos(r.z)}}e.acos=Tt;function $(r){return{x:Math.cosh(r.x),y:Math.cosh(r.y),z:Math.cosh(r.z)}}e.cosh=$;function St(r){return{x:Math.acosh(r.x),y:Math.acosh(r.y),z:Math.acosh(r.z)}}e.acosh=St;function V(r){return{x:Math.tan(r.x),y:Math.tan(r.y),z:Math.tan(r.z)}}e.tan=V;function Ct(r){return{x:Math.atan(r.x),y:Math.atan(r.y),z:Math.atan(r.z)}}e.atan=Ct;function It(r){return{x:Math.tanh(r.x),y:Math.tanh(r.y),z:Math.tanh(r.z)}}e.tanh=It;function ot(r){return{x:Math.atanh(r.x),y:Math.atanh(r.y),z:Math.atanh(r.z)}}e.atanh=ot;function Dt(r,u=1){return N(r,I(e.Up,u))}e.above=Dt;function Lt(r,u=1){return N(r,I(e.Down,u))}e.below=Lt;function Ot(r,u=1){return N(r,I(e.North,u))}e.north=Ot;function Nt(r,u=1){return N(r,I(e.South,u))}e.south=Nt;function Pt(r,u=1){return N(r,I(e.East,u))}e.east=Pt;function jt(r,u=1){return N(r,I(e.West,u))}e.west=jt;function i(r,u){return r.x*u.x+r.y*u.y+r.z*u.z}e.dot=i;function f(r,u){return{x:r.y*u.z-r.z*u.y,y:r.z*u.x-r.x*u.z,z:r.x*u.y-r.y*u.x}}e.cross=f;function w(r){return Math.hypot(r.x,r.y,r.z)}e.length=w;function P(r){return it(r,w(r))}e.normalize=P;function B(r,u){return w(W(r,u))}e.distance=B;function Y(r,u){return I(u,i(r,u)/i(u,u))}e.project=Y;function Ut(r,u){return W(r,Y(r,u))}e.reject=Ut;function qt(r,u){return W(r,I(u,2*i(u,r)))}e.reflect=qt;function nr(r,u,x){let D=-i(r,u),Q=x*x*(1-D*D),H=Math.sqrt(1-Q);return N(I(r,x),I(u,x*D-H))}e.refract=nr;function ir(r,u,x){return x===0?r:x===1?u:{x:r.x+x*(u.x-r.x),y:r.y+x*(u.y-r.y),z:r.z+x*(u.z-r.z)}}e.lerp=ir;function or(r,u,x){if(x===0)return r;if(x===1)return u;let D=i(r,u),Q=Math.acos(D),H=Math.sqrt(1-D*D),kt=Math.sin((1-x)*Q)/H,Ft=Math.sin(x*Q)/H;return N(I(r,kt),I(u,Ft))}e.slerp=or;function sr(r,u,x){let D=Math.cos(x),Q=Math.sin(x),H=I(u,i(r,u)),kt=W(r,H),Ft=f(u,r);return N(H,N(I(kt,D),I(Ft,Q)))}e.rotate=sr})(R||(R={}));var G;(e=>{e.Identity={m11:1,m12:0,m13:0,m21:0,m22:1,m23:0,m31:0,m32:0,m33:1};function t(n){return typeof n=="object"&&"m11"in n&&"m12"in n&&"m13"in n&&"m21"in n&&"m22"in n&&"m23"in n&&"m31"in n&&"m32"in n&&"m33"in n}e.isMatrix3=t;function o(n,E,q){if(Array.isArray(n)&&n.length>=9)return{m11:n[0],m12:n[1],m13:n[2],m21:n[3],m22:n[4],m23:n[5],m31:n[6],m32:n[7],m33:n[8]};if(R.isVector3(n)&&E&&q)return{m11:n.x,m12:E.x,m13:q.x,m21:n.y,m22:E.y,m23:q.y,m31:n.z,m32:E.z,m33:q.z};throw new Error("Invalid input values for vector construction.")}e.from=o;function s(n){return{x:n.m11,y:n.m21,z:n.m31}}e.c1=s;function a(n){return{x:n.m12,y:n.m22,z:n.m32}}e.c2=a;function l(n){return{x:n.m13,y:n.m23,z:n.m33}}e.c3=l;function y(n){return{x:n.m11,y:n.m12,z:n.m13}}e.r1=y;function g(n){return{x:n.m21,y:n.m22,z:n.m23}}e.r2=g;function p(n){return{x:n.m31,y:n.m32,z:n.m33}}e.r3=p;function M(n,E){return t(E)?{m11:R.dot(y(n),s(E)),m12:R.dot(y(n),a(E)),m13:R.dot(y(n),l(E)),m21:R.dot(g(n),s(E)),m22:R.dot(g(n),a(E)),m23:R.dot(g(n),l(E)),m31:R.dot(p(n),s(E)),m32:R.dot(p(n),a(E)),m33:R.dot(p(n),l(E))}:R.isVector3(E)?{x:R.dot(y(n),E),y:R.dot(g(n),E),z:R.dot(p(n),E)}:{m11:n.m11*E,m12:n.m12*E,m13:n.m13*E,m21:n.m21*E,m22:n.m22*E,m23:n.m23*E,m31:n.m31*E,m32:n.m32*E,m33:n.m33*E}}e.mul=M;function z(n){return n.m11+n.m22+n.m33}e.trace=z;function b(n){return n.m11*n.m22*n.m33+n.m21*n.m32*n.m13+n.m31*n.m12*n.m23-n.m13*n.m22*n.m31-n.m23*n.m32*n.m11-n.m33*n.m12*n.m21}e.determinant=b;function L(n){return{m11:n.m11,m12:n.m21,m13:n.m31,m21:n.m12,m22:n.m22,m23:n.m32,m31:n.m13,m32:n.m23,m33:n.m33}}e.transpose=L;function U(n){return{m11:n.m22*n.m33-n.m23*n.m32,m12:n.m23*n.m31-n.m21*n.m33,m13:n.m21*n.m32-n.m22*n.m31,m21:n.m13*n.m32-n.m12*n.m33,m22:n.m11*n.m33-n.m13*n.m31,m23:n.m12*n.m31-n.m11*n.m32,m31:n.m12*n.m23-n.m13*n.m22,m32:n.m13*n.m21-n.m11*n.m23,m33:n.m11*n.m22-n.m12*n.m21}}e.cofactor=U;function m(n){return{m11:n.m22*n.m33-n.m23*n.m32,m12:n.m13*n.m32-n.m12*n.m33,m13:n.m12*n.m23-n.m13*n.m22,m21:n.m23*n.m31-n.m21*n.m33,m22:n.m11*n.m33-n.m13*n.m31,m23:n.m13*n.m21-n.m11*n.m23,m31:n.m21*n.m32-n.m22*n.m31,m32:n.m12*n.m31-n.m11*n.m32,m33:n.m11*n.m22-n.m12*n.m21}}e.adjugate=m;function T(n){let E=b(n);if(E===0)throw new Error("Matrix is not invertible.");return M(m(n),1/E)}e.inverse=T;function v(n){let E=Math.abs(n.y)===1?R.East:R.normalize(R.from(n.z,0,-n.x)),q=R.cross(E,n);return e.from(E,n,q)}e.buildTNB=v})(G||(G={}));var st;(e=>{e.Identity={m11:1,m12:0,m21:0,m22:1};function t(m){return typeof m=="object"&&"m11"in m&&"m12"in m&&"m21"in m&&"m22"in m}e.isMatrix2=t;function o(m,T){if(Array.isArray(m)&&m.length>=4)return{m11:m[0],m12:m[1],m21:m[2],m22:m[3]};if(k.isVector2(m)&&T)return{m11:m.x,m12:T.x,m21:m.y,m22:T.y};throw new Error("Invalid input values for vector construction.")}e.from=o;function s(m){return{x:m.m11,y:m.m21}}e.c1=s;function a(m){return{x:m.m12,y:m.m22}}e.c2=a;function l(m){return{x:m.m11,y:m.m12}}e.r1=l;function y(m){return{x:m.m21,y:m.m22}}e.r2=y;function g(m,T){return t(T)?{m11:k.dot(l(m),s(T)),m12:k.dot(l(m),a(T)),m21:k.dot(y(m),s(T)),m22:k.dot(y(m),a(T))}:k.isVector2(T)?{x:k.dot(l(m),T),y:k.dot(y(m),T)}:{m11:m.m11*T,m12:m.m12*T,m21:m.m21*T,m22:m.m22*T}}e.mul=g;function p(m){return m.m11+m.m22}e.trace=p;function M(m){return m.m11*m.m22-m.m12*m.m21}e.determinant=M;function z(m){return{m11:m.m11,m12:m.m21,m21:m.m12,m22:m.m22}}e.transpose=z;function b(m){return{m11:m.m22,m12:-m.m21,m21:-m.m12,m22:m.m11}}e.cofactor=b;function L(m){return{m11:m.m22,m12:-m.m12,m21:-m.m21,m22:m.m11}}e.adjugate=L;function U(m){let T=M(m);if(T===0)throw new Error("Matrix is not invertible.");return g(L(m),1/T)}e.inverse=U})(st||(st={}));var k;(e=>{e.Zero={x:0,y:0},e.One={x:1,y:1},e.Up={x:0,y:1},e.Down={x:0,y:-1},e.Left={x:-1,y:0},e.Right={x:1,y:0},e.X=e.Right,e.Y=e.Up;function t(i){return typeof i=="object"&&"x"in i&&"y"in i}e.isVector2=t;function o(i,f){if(Array.isArray(i)&&i.length>=2)return{x:i[0],y:i[1]};if(typeof i=="number")return{x:i,y:f??i};throw new Error("Invalid input values for vector construction.")}e.from=o;function s(i){let{x:f,y:w}=i;return[f,w]}e.toArray=s;function a(i){return s(i).join(" ")}e.toString=a;function l(i){let[f,w]=i.split(" ").map(Number);return{x:f,y:w}}e.parse=l;function y(i){return Number.isNaN(i.x)||Number.isNaN(i.y)}e.isnan=y;function g(i){return!p(i)}e.isinf=g;function p(i){return Number.isFinite(i.x)&&Number.isFinite(i.y)}e.isfinite=p;function M(i,f){return i.x===f.x&&i.y===f.y}e.equal=M;function z(i,f){return{x:Math.min(i.x,f.x),y:Math.min(i.y,f.y)}}e.min=z;function b(i,f){return{x:Math.max(i.x,f.x),y:Math.max(i.y,f.y)}}e.max=b;function L(i,f,w){return{x:Math.min(Math.max(i.x,f.x),w.x),y:Math.min(Math.max(i.y,f.y),w.y)}}e.clamp=L;function U(i){return{x:Math.min(Math.max(i.x,0),1),y:Math.min(Math.max(i.y,0),1)}}e.saturate=U;function m(i){return{x:Math.sign(i.x),y:Math.sign(i.y)}}e.sign=m;function T(i){return{x:Math.floor(i.x),y:Math.floor(i.y)}}e.floor=T;function v(i){return{x:Math.ceil(i.x),y:Math.ceil(i.y)}}e.ceil=v;function n(i){return{x:i.x-Math.floor(i.x),y:i.y-Math.floor(i.y)}}e.frac=n;function E(i){return{x:Math.round(i.x),y:Math.round(i.y)}}e.round=E;function q(i,f){return{x:i.x%f.x,y:i.y%f.y}}e.mod=q;function rt(i){return{x:-i.x,y:-i.y}}e.neg=rt;function ft(i){return{x:Math.abs(i.x),y:Math.abs(i.y)}}e.abs=ft;function _(i,...f){for(let w of f)i={x:i.x+w.x,y:i.y+w.y};return i}e.add=_;function Z(i,...f){for(let w of f)i={x:i.x-w.x,y:i.y-w.y};return i}e.sub=Z;function F(i,f){return t(f)?{x:i.x*f.x,y:i.y*f.y}:{x:i.x*f,y:i.y*f}}e.mul=F;function et(i,f){return t(f)?{x:i.x/f.x,y:i.y/f.y}:{x:i.x/f,y:i.y/f}}e.div=et;function mt(i){return{x:Math.sqrt(i.x),y:Math.sqrt(i.y)}}e.sqrt=mt;function nt(i){return{x:Math.exp(i.x),y:Math.exp(i.y)}}e.exp=nt;function N(i){return{x:Math.pow(2,i.x),y:Math.pow(2,i.y)}}e.exp2=N;function W(i){return{x:Math.log(i.x),y:Math.log(i.y)}}e.log=W;function I(i){return{x:Math.log2(i.x),y:Math.log2(i.y)}}e.log2=I;function it(i){return{x:Math.log10(i.x),y:Math.log10(i.y)}}e.log10=it;function yt(i,f){return t(f)?{x:Math.pow(i.x,f.x),y:Math.pow(i.y,f.y)}:{x:Math.pow(i.x,f),y:Math.pow(i.y,f)}}e.pow=yt;function dt(i){return{x:Math.sin(i.x),y:Math.sin(i.y)}}e.sin=dt;function pt(i){return{x:Math.asin(i.x),y:Math.asin(i.y)}}e.asin=pt;function gt(i){return{x:Math.sinh(i.x),y:Math.sinh(i.y)}}e.sinh=gt;function xt(i){return{x:Math.asinh(i.x),y:Math.asinh(i.y)}}e.asinh=xt;function Mt(i){return{x:Math.cos(i.x),y:Math.cos(i.y)}}e.cos=Mt;function Et(i){return{x:Math.acos(i.x),y:Math.acos(i.y)}}e.acos=Et;function zt(i){return{x:Math.cosh(i.x),y:Math.cosh(i.y)}}e.cosh=zt;function wt(i){return{x:Math.acosh(i.x),y:Math.acosh(i.y)}}e.acosh=wt;function At(i){return{x:Math.tan(i.x),y:Math.tan(i.y)}}e.tan=At;function bt(i){return{x:Math.atan(i.x),y:Math.atan(i.y)}}e.atan=bt;function Rt(i){return{x:Math.tanh(i.x),y:Math.tanh(i.y)}}e.tanh=Rt;function Tt(i){return{x:Math.atanh(i.x),y:Math.atanh(i.y)}}e.atanh=Tt;function $(i,f){return i.x*f.x+i.y*f.y}e.dot=$;function St(i,f){return i.x*f.y-i.y*f.x}e.wedge=St;function V(i){return Math.hypot(i.x,i.y)}e.length=V;function Ct(i){return et(i,V(i))}e.normalize=Ct;function It(i,f){return V(Z(i,f))}e.distance=It;function ot(i,f){return F(f,$(i,f)/$(f,f))}e.project=ot;function Dt(i,f){return Z(i,ot(i,f))}e.reject=Dt;function Lt(i,f){return Z(i,F(f,2*$(f,i)))}e.reflect=Lt;function Ot(i,f,w){let P=-$(i,f),B=w*w*(1-P*P),Y=Math.sqrt(1-B);return _(F(i,w),F(f,w*P-Y))}e.refract=Ot;function Nt(i,f,w){return w===0?i:w===1?f:{x:i.x+w*(f.x-i.x),y:i.y+w*(f.y-i.y)}}e.lerp=Nt;function Pt(i,f,w){if(w===0)return i;if(w===1)return f;let P=$(i,f),B=Math.acos(P),Y=Math.sqrt(1-P*P),Ut=Math.sin((1-w)*B)/Y,qt=Math.sin(w*B)/Y;return _(F(i,Ut),F(f,qt))}e.slerp=Pt;function jt(i,f){let w=Math.cos(f),P=Math.sin(f),B=st.from([w,-P,P,w]);return st.mul(B,i)}e.rotate=jt})(k||(k={}));var Yt;(e=>{function t(){return{x:Math.random(),y:Math.random()}}e.random2=t;function o(){return{x:Math.random(),y:Math.random(),z:Math.random()}}e.random3=o;function s(){let M=Math.random()*Math.PI*2;return{x:Math.cos(M),y:Math.sin(M)}}e.circle=s;function a(){let M=t(),z=M.x*Math.PI*2,b=Math.sqrt(M.y);return{x:b*Math.cos(z),y:b*Math.sin(z)}}e.disk=a;function l(){let M=t(),z=M.x*Math.PI*2,b=2*Math.sqrt(M.y*(1-M.y));return{x:Math.cos(z)*b,y:1-2*M.y,z:Math.sin(z)*b}}e.sphere=l;function y(){let M=t(),z=M.x*Math.PI*2,b=Math.sqrt(M.y*(2-M.y));return{x:Math.cos(z)*b,y:1-M.y,z:Math.sin(z)*b}}e.hemisphere=y;function g(){let M=t(),z=M.x*Math.PI*2,b=Math.sqrt(M.y);return{x:Math.cos(z)*b,y:Math.sqrt(1-M.y),z:Math.sin(z)*b}}e.cosHemisphere=g;function p(M){let z=t(),b=z.x*Math.PI*2,L=z.y*(1-Math.cos(M)),U=Math.sqrt(L*(2-L));return{x:Math.cos(b)*U,y:1-L,z:Math.sin(b)*U}}e.cap=p})(Yt||(Yt={}));import{WeatherType as mr,world as Gt}from"@minecraft/server";import{Direction as A}from"@minecraft/server";import{system as ar,world as tt}from"@minecraft/server";import{system as Or}from"@minecraft/server";import{BlockPermutation as Pr,world as jr}from"@minecraft/server";import{world as qr}from"@minecraft/server";import{Player as Fr}from"@minecraft/server";import{system as $t}from"@minecraft/server";import{EquipmentSlot as Gr}from"@minecraft/server";import{system as Ht}from"@minecraft/server";import{MinecraftDimensionTypes as Hr,world as Zr}from"@minecraft/server";import{Player as fr,system as Zt,world as at}from"@minecraft/server";var d=class c{constructor(t,o){this.code=t,this.color=o,o&&(this.r=o>>16&255,this.g=o>>8&255,this.b=o&255)}static BLACK=new c("0",0);static DARK_BLUE=new c("1",170);static DARK_GREEN=new c("2",43520);static DARK_AQUA=new c("3",43690);static DARK_RED=new c("4",11141120);static DARK_PURPLE=new c("5",11141290);static GOLD=new c("6",16755200);static GRAY=new c("7",11184810);static DARK_GRAY=new c("8",5592405);static BLUE=new c("9",5592575);static GREEN=new c("a",5635925);static AQUA=new c("b",5636095);static RED=new c("c",16733525);static LIGHT_PURPLE=new c("d",16733695);static YELLOW=new c("e",16777045);static WHITE=new c("f",16777215);static MINECOIN_GOLD=new c("g",14603781);static MATERIAL_QUARTZ=new c("h",14931153);static MATERIAL_IRON=new c("i",13552330);static MATERIAL_NETHERITE=new c("j",4471355);static MATERIAL_REDSTONE=new c("m",9901575);static MATERIAL_COPPER=new c("n",11823181);static MATERIAL_GOLD=new c("p",14594349);static MATERIAL_EMERALD=new c("q",1155126);static MATERIAL_DIAMOND=new c("s",2931368);static MATERIAL_LAPIS=new c("t",2181499);static MATERIAL_AMETHYST=new c("u",10116294);static OBFUSCATED=new c("k");static BOLD=new c("l");static ITALIC=new c("o");static RESET=new c("r");static VALUES=[c.BLACK,c.DARK_BLUE,c.DARK_GREEN,c.DARK_AQUA,c.DARK_RED,c.DARK_PURPLE,c.GOLD,c.GRAY,c.DARK_GRAY,c.BLUE,c.GREEN,c.AQUA,c.RED,c.LIGHT_PURPLE,c.YELLOW,c.WHITE,c.MINECOIN_GOLD,c.MATERIAL_QUARTZ,c.MATERIAL_IRON,c.MATERIAL_NETHERITE,c.MATERIAL_REDSTONE,c.MATERIAL_COPPER,c.MATERIAL_GOLD,c.MATERIAL_EMERALD,c.MATERIAL_DIAMOND,c.MATERIAL_LAPIS,c.MATERIAL_AMETHYST,c.OBFUSCATED,c.BOLD,c.ITALIC,c.RESET];static ALL_COLORS=[c.BLACK,c.DARK_BLUE,c.DARK_GREEN,c.DARK_AQUA,c.DARK_RED,c.DARK_PURPLE,c.GOLD,c.GRAY,c.DARK_GRAY,c.BLUE,c.GREEN,c.AQUA,c.RED,c.LIGHT_PURPLE,c.YELLOW,c.WHITE,c.MINECOIN_GOLD,c.MATERIAL_QUARTZ,c.MATERIAL_IRON,c.MATERIAL_NETHERITE,c.MATERIAL_REDSTONE,c.MATERIAL_COPPER,c.MATERIAL_GOLD,c.MATERIAL_EMERALD,c.MATERIAL_DIAMOND,c.MATERIAL_LAPIS,c.MATERIAL_AMETHYST];r;g;b;static PREFIX="\xA7";toString(){return c.PREFIX+this.code}toRGB(){return this.color}toHex(){var t;return(t=this.color)==null?void 0:t.toString(16)}getRed(){return this.r}getGreen(){return this.g}getBlue(){return this.b}getCode(){return this.code}static stripColor(t){return t.replace(/§[0-9a-u]/g,"")}static findClosestColor(t,o,s){let a=Number.MAX_VALUE,l=c.WHITE;for(let y of c.ALL_COLORS)if(y.r&&y.g&&y.b){let g=Math.sqrt(Math.pow(y.r-t,2)+Math.pow(y.g-o,2)+Math.pow(y.b-s,2));g<a&&(a=g,l=y)}return l}},ur=class Qt{OpenObject="{";CloseObject="}";OpenArray="[";CloseArray="]";Comma=",";KeyValueSeparator=":";StringDelimiter='"';KeyDelimiter="";Indent="  ";NewLine=`
`;Space=" ";InlineThreshold=60;MaxDepth=1;IncludeClassNames=!0;FunctionValue="\u0192";NullValue="null";UndefinedValue="undefined";TrueValue="true";FalseValue="false";CycleValue="[...cycle...]";TruncatedObjectValue="{...}";OpenCloseObjectColor=d.YELLOW;OpenCloseArrayColor=d.AQUA;NumberColor=d.DARK_AQUA;StringColor=d.DARK_GREEN;BooleanColor=d.GOLD;NullColor=d.GOLD;KeyColor=d.GRAY;EscapeColor=d.GOLD;FunctionColor=d.GRAY;ClassColor=d.GRAY;ClassStyle=d.BOLD;CycleColor=d.DARK_RED;static DEFAULT=new Qt;stringify(t){return this.stringifyValue(t)}stringifyString(t){return this.StringColor+this.StringDelimiter+this.escapeString(t)+this.StringDelimiter+d.RESET}stringifyNumber(t){return this.NumberColor+t.toString()+d.RESET}stringifyBoolean(t){return this.BooleanColor+(t?this.TrueValue:this.FalseValue)+d.RESET}stringifyFunction(t){return this.FunctionColor+this.FunctionValue+d.RESET}stringifyNull(){return this.NullColor+this.NullValue+d.RESET}stringifyUndefined(){return this.NullColor+this.UndefinedValue+d.RESET}stringifyCycle(){return this.CycleColor+this.CycleValue+d.RESET}stringifyArray(t,o=0){let s=this.Indent.repeat(o);if(t.length===0)return this.OpenCloseArrayColor+this.OpenArray+this.CloseArray+d.RESET;let a=this.OpenCloseArrayColor+this.OpenArray+d.RESET+this.NewLine,l=this.OpenCloseArrayColor+this.OpenArray+d.RESET;return t.forEach((y,g)=>{a+=s+this.Indent+this.stringifyValue(y,o+1),a+=g<t.length-1?this.Comma+this.NewLine:this.NewLine,l+=this.stringifyValue(y,o+1),l+=g<t.length-1?this.Comma+this.Space:""}),a+=s+this.OpenCloseArrayColor+this.CloseArray+d.RESET,l+=this.OpenCloseArrayColor+this.CloseArray+d.RESET,l.length<this.InlineThreshold?l:a}stringifyTruncatedObject(t,o,s=0){return(this.IncludeClassNames?this.ClassColor+""+this.ClassStyle+o+d.RESET+this.Space:"")+this.TruncatedObjectValue}stringifyObject(t,o,s,a=0){let l=this.Indent.repeat(a),y=this.IncludeClassNames&&o!=="Object"?this.ClassColor+""+this.ClassStyle+o+d.RESET+this.Space:"";if(s.length===0)return y+this.OpenCloseObjectColor+this.OpenObject+this.CloseObject+d.RESET;let g=y+this.OpenCloseObjectColor+this.OpenObject+d.RESET+this.NewLine,p=y+this.OpenCloseObjectColor+this.OpenObject+d.RESET;return s.forEach(([M,z],b)=>{let L=this.stringifyValue(z,a+1);g+=l+this.Indent+this.KeyColor+this.KeyDelimiter+M+this.KeyDelimiter+d.RESET+this.KeyValueSeparator+this.Space+L,g+=b<s.length-1?this.Comma+this.NewLine:this.NewLine,p+=this.KeyColor+M+d.RESET+this.KeyValueSeparator+this.Space+L,p+=b<s.length-1?this.Comma+this.Space:""}),g+=l+this.OpenCloseObjectColor+this.CloseObject+d.RESET,p+=this.OpenCloseObjectColor+this.CloseObject+d.RESET,p.length<this.InlineThreshold?p:g}shouldTruncateObject(t,o,s=0){return!(o==="Object"||s<=this.MaxDepth||this.MaxDepth<=0)}stringifyValue(t,o=0){if(t===null)return this.stringifyNull();if(t===void 0)return this.stringifyUndefined();if(typeof t=="number")return this.stringifyNumber(t);if(typeof t=="string")return this.stringifyString(t);if(typeof t=="boolean")return this.stringifyBoolean(t);if(typeof t=="function")return this.stringifyFunction(t);if(this.isCycle(t))return this.stringifyCycle();if(this.markCycle(t),Array.isArray(t)){let s=this.stringifyArray(t,o?o+1:0);return this.clearCycle(t),s}if(typeof t=="object"){let s=t.constructor.name;if(this.shouldTruncateObject(t,s,o)){let a=this.stringifyTruncatedObject(t,s,o);return this.clearCycle(t),a}else{let a=new Set,l=Object.getPrototypeOf(t),y=Object.keys(l);for(;y.length>0;)y.forEach(z=>a.add(z)),l=Object.getPrototypeOf(l),y=Object.keys(l);Object.keys(t).forEach(z=>a.add(z)),a.delete("__cycleDetection__");let p=[...a].sort().map(z=>{try{return[z,t[z]??void 0]}catch{return[z,void 0]}}).filter(([,z])=>typeof z!="function"&&z!==void 0),M=this.stringifyObject(t,s,p,o);return this.clearCycle(t),M}}return this.clearCycle(t),d.RESET+t.toString()}escapeString(t){return t.replace(/\\/g,this.EscapeColor+"\\\\"+this.StringColor).replace(/"/g,this.EscapeColor+'\\"'+this.StringColor).replace(/\n/g,this.EscapeColor+"\\n"+this.StringColor).replace(/\r/g,this.EscapeColor+"\\r"+this.StringColor).replace(/\t/g,this.EscapeColor+"\\t"+this.StringColor)}markCycle(t){t.__cycleDetection__=!0}isCycle(t){return!!t.__cycleDetection__}clearCycle(t){delete t.__cycleDetection__}},O=class C{constructor(t,o,s=d.RESET){this.level=t,this.name=o,this.color=s}static All=new C(-2,"all");static Trace=new C(-2,"trace",d.DARK_AQUA);static Debug=new C(-1,"debug",d.AQUA);static Info=new C(0,"info",d.GREEN);static Warn=new C(1,"warn",d.GOLD);static Error=new C(2,"error",d.RED);static Fatal=new C(3,"fatal",d.DARK_RED);static Off=new C(100,"off");static values=[C.All,C.Trace,C.Debug,C.Info,C.Warn,C.Error,C.Fatal,C.Off];toString(){return this.color+this.name.toUpperCase()+d.RESET}static parse(t){t=t.toLowerCase();for(let s of C.values)if(s.name===t)return s;let o=parseInt(t);if(!isNaN(o)){for(let s of C.values)if(s.level===o)return s}}};function hr(e,t){return e==="*"?!0:e.includes("*")?e.startsWith("*")?t.endsWith(e.substring(1)):e.endsWith("*")?t.startsWith(e.substring(0,e.length-1)):new RegExp(e.replace(/\*/g,".*")).test(t):e===t}var S={level:O.Info,filter:["*"],outputTags:!1,formatFunction:(e,t,o,s=void 0)=>{let a=s!==void 0?`\xA77${s.map(l=>`[${l}]`).join("")}\xA7r`:"";return`[${e}][${d.MATERIAL_EMERALD}${t.name}${d.RESET}]${a} ${o}`},messagesJoinFunction:e=>e.join(" "),jsonFormatter:ur.DEFAULT,outputConfig:{[O.Trace.level]:[0,1],[O.Debug.level]:[0,1],[O.Info.level]:[0,1],[O.Warn.level]:[0,1,2],[O.Error.level]:[0,1,3],[O.Fatal.level]:[0,1,3]}},X=class J{constructor(t,o=[]){this.name=t,this.tags=o}static initialized=!1;static init(){J.initialized||(J.initialized=!0,ar.afterEvents.scriptEventReceive.subscribe(t=>{if(t.id==="logging:level"||t.id==="log:level")if(!t.message)S.level=O.Info,tt.sendMessage(`${d.AQUA}Logging level set to ${d.BOLD}${S.level}`);else{let o=O.parse(t.message);o?(S.level=o,tt.sendMessage(`${d.AQUA}Logging level set to ${d.BOLD}${S.level}`)):tt.sendMessage(`${d.DARK_RED}Invalid logging level: ${t.message}`)}else(t.id==="logging:filter"||t.id==="log:filter")&&(t.message?S.filter=t.message.split(","):S.filter=["*"],tt.sendMessage(`${d.AQUA}Logging filter set to ${d.BOLD}${S.filter.join(", ")}`))}))}static setLevel(t){S.level=t}static setFilter(t){S.filter=t}static setFormatFunction(t){S.formatFunction=t}static setMessagesJoinFunction(t){S.messagesJoinFunction=t}static setTagsOutputVisibility(t){S.outputTags=t}static setJsonFormatter(t){S.jsonFormatter=t}static getOutputConfig(){return S.outputConfig}static getLogger(t,...o){return J.initialized||J.init(),new J(t,o)}log(t,...o){if(!(t.level<S.level.level)){if(S.filter.length===0||this.tags.length===0){this.logRaw(t,...o);return}for(let s of S.filter)if(hr(s,this.name)){this.logRaw(t,...o);return}}}logRaw(t,...o){{let s=o.map(y=>y===void 0?d.GOLD+"undefined"+d.RESET:y===null?d.GOLD+"null"+d.RESET:y&&y instanceof Error?`${d.DARK_RED}${d.BOLD}${y.message}
${d.RESET}${d.GRAY}${d.ITALIC}${y.stack}${d.RESET}`:typeof y=="object"||Array.isArray(y)?S.jsonFormatter.stringify(y)+d.RESET:y.toString()+d.RESET),a=S.formatFunction(t,this,S.messagesJoinFunction(s),S.outputTags?this.tags:void 0),l=S.outputConfig[t.level]||[0,1];l.includes(0)&&tt.sendMessage(a),l.includes(1)&&(console.originalLog?console.originalLog(d.stripColor(a)):console.log(d.stripColor(a))),l.includes(2)&&console.warn(a),l.includes(3)&&console.error(a)}}trace(...t){this.log(O.Trace,...t)}debug(...t){this.log(O.Debug,...t)}info(...t){this.log(O.Info,...t)}warn(...t){this.log(O.Warn,...t)}error(...t){this.log(O.Error,...t)}fatal(...t){this.log(O.Fatal,...t)}},Ir=class h{static log=X.getLogger("vec3","vec3","bedrock-boost");static Zero=new h(0,0,0);static Down=new h(A.Down);static Up=new h(A.Up);static North=new h(A.North);static South=new h(A.South);static East=new h(A.East);static West=new h(A.West);x;y;z;constructor(t,o,s){if(t===A.Down)this.x=0,this.y=-1,this.z=0;else if(t===A.Up)this.x=0,this.y=1,this.z=0;else if(t===A.North)this.x=0,this.y=0,this.z=1;else if(t===A.South)this.x=0,this.y=0,this.z=-1;else if(t===A.East)this.x=1,this.y=0,this.z=0;else if(t===A.West)this.x=-1,this.y=0,this.z=0;else if(typeof t=="number")this.x=t,this.y=o,this.z=s;else if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2];else if(t instanceof h)this.x=t.x,this.y=t.y,this.z=t.z;else{if(!t||!t.x&&t.x!==0||!t.y&&t.y!==0||!t.z&&t.z!==0)throw h.log.error(new Error("Invalid vector"),t),new Error("Invalid vector");this.x=t.x,this.y=t.y,this.z=t.z}}static from(t,o,s){if(t instanceof h)return t;if(typeof t=="number"&&o!==void 0&&s!==void 0)return new h(t,o,s);if(Array.isArray(t))return new h(t);if(t===A.Down)return h.Down;if(t===A.Up)return h.Up;if(t===A.North)return h.North;if(t===A.South)return h.South;if(t===A.East)return h.East;if(t===A.West)return h.West;if(!t||!t.x&&t.x!==0||!t.y&&t.y!==0||!t.z&&t.z!==0)throw h.log.error(new Error("Invalid arguments"),t,o,s),new Error("Invalid arguments");return new h(t.x,t.y,t.z)}static _from(t,o,s){if(t instanceof h)return t;if(typeof t=="number"&&o!==void 0&&s!==void 0)return new h(t,o,s);if(Array.isArray(t))return new h(t);if(t===A.Down)return h.Down;if(t===A.Up)return h.Up;if(t===A.North)return h.North;if(t===A.South)return h.South;if(t===A.East)return h.East;if(t===A.West)return h.West;if(!t||!t.x&&t.x!==0||!t.y&&t.y!==0||!t.z&&t.z!==0)throw h.log.error(new Error("Invalid arguments"),t,o,s),new Error("Invalid arguments");return new h(t.x,t.y,t.z)}copy(){return h.from(this)}static fromYawPitch(t,o){let s;typeof t=="number"?(s=t,o=o):(s=t.y,o=t.x);let a=s*(Math.PI/180),l=o*(Math.PI/180),y=Math.cos(l)*Math.sin(a),g=Math.sin(l),p=Math.cos(l)*Math.cos(a);return new h(y,g,p)}toYawPitch(){if(this.isZero())throw h.log.error(new Error("Cannot convert zero-length vector to direction")),new Error("Cannot convert zero-length vector to direction");let t=this.normalize(),o=Math.atan2(t.x,t.z)*(180/Math.PI);return{x:Math.asin(t.y)*(180/Math.PI),y:o}}add(t,o,s){let a=h._from(t,o,s);return h.from(a.x+this.x,a.y+this.y,a.z+this.z)}subtract(t,o,s){let a=h._from(t,o,s);return h.from(this.x-a.x,this.y-a.y,this.z-a.z)}multiply(t,o,s){if(typeof t=="number"&&o===void 0&&s===void 0)return h.from(this.x*t,this.y*t,this.z*t);let a=h._from(t,o,s);return h.from(a.x*this.x,a.y*this.y,a.z*this.z)}scale(t){return h.from(this.x*t,this.y*t,this.z*t)}divide(t,o,s){if(typeof t=="number"&&o===void 0&&s===void 0){if(t===0)throw new Error("Cannot divide by zero");return h.from(this.x/t,this.y/t,this.z/t)}let a=h._from(t,o,s);if(a.x===0||a.y===0||a.z===0)throw new Error("Cannot divide by zero");return h.from(this.x/a.x,this.y/a.y,this.z/a.z)}normalize(){if(this.isZero())throw h.log.error(new Error("Cannot normalize zero-length vector")),new Error("Cannot normalize zero-length vector");let t=this.length();return h.from(this.x/t,this.y/t,this.z/t)}length(){return Math.sqrt(this.lengthSquared())}lengthSquared(){return this.x*this.x+this.y*this.y+this.z*this.z}cross(t,o,s){let a=h._from(t,o,s);return h.from(this.y*a.z-this.z*a.y,this.z*a.x-this.x*a.z,this.x*a.y-this.y*a.x)}distance(t,o,s){let a=h._from(t,o,s);return Math.sqrt(this.distanceSquared(a))}distanceSquared(t,o,s){let a=h._from(t,o,s);return this.subtract(a).lengthSquared()}lerp(t,o){return!t||!o?h.from(this):o===1?h.from(t):o===0?h.from(this):h.from(this.x+(t.x-this.x)*o,this.y+(t.y-this.y)*o,this.z+(t.z-this.z)*o)}slerp(t,o){if(!t||!o)return h.from(this);if(o===1)return h.from(t);if(o===0)return h.from(this);let s=this.dot(t),a=Math.acos(s)*o,l=h.from(t).subtract(this.multiply(s)).normalize();return this.multiply(Math.cos(a)).add(l.multiply(Math.sin(a)))}dot(t,o,s){let a=h._from(t,o,s);return this.x*a.x+this.y*a.y+this.z*a.z}angleBetween(t,o,s){let a=h._from(t,o,s),l=this.dot(a),y=this.length()*a.length();return y===0?0:Math.acos(l/y)}projectOnto(t,o,s){let a=h._from(t,o,s);if(a.isZero())return h.Zero;let l=this.dot(a)/a.dot(a);return h.from(a.x*l,a.y*l,a.z*l)}reflect(t,o,s){let a=h._from(t,o,s),l=this.projectOnto(a);return this.subtract(l.multiply(2))}rotate(t,o){let s=o*Math.PI/180/2,a=Math.cos(s),l=t.x*Math.sin(s),y=t.y*Math.sin(s),g=t.z*Math.sin(s),p=this,M=a*a*p.x+2*y*a*p.z-2*g*a*p.y+l*l*p.x+2*y*l*p.y+2*g*l*p.z-g*g*p.x-y*y*p.x,z=2*l*y*p.x+y*y*p.y+2*g*y*p.z+2*a*g*p.x-g*g*p.y+a*a*p.y-2*l*a*p.z-l*l*p.y,b=2*l*g*p.x+2*y*g*p.y+g*g*p.z-2*a*y*p.x-y*y*p.z+2*a*l*p.y-l*l*p.z+a*a*p.z;return new h(M,z,b)}setX(t){return new h(t,this.y,this.z)}setY(t){return new h(this.x,t,this.z)}setZ(t){return new h(this.x,this.y,t)}distanceToLineSegment(t,o){let s=h.from(o).subtract(t);if(s.lengthSquared()===0)return this.subtract(t).length();let a=Math.max(0,Math.min(1,this.subtract(t).dot(s)/s.dot(s))),l=h.from(t).add(s.multiply(a));return this.subtract(l).length()}floor(){return new h(Math.floor(this.x),Math.floor(this.y),Math.floor(this.z))}floorX(){return new h(Math.floor(this.x),this.y,this.z)}floorY(){return new h(this.x,Math.floor(this.y),this.z)}floorZ(){return new h(this.x,this.y,Math.floor(this.z))}ceil(){return new h(Math.ceil(this.x),Math.ceil(this.y),Math.ceil(this.z))}ceilX(){return new h(Math.ceil(this.x),this.y,this.z)}ceilY(){return new h(this.x,Math.ceil(this.y),this.z)}ceilZ(){return new h(this.x,this.y,Math.ceil(this.z))}round(){return new h(Math.round(this.x),Math.round(this.y),Math.round(this.z))}roundX(){return new h(Math.round(this.x),this.y,this.z)}roundY(){return new h(this.x,Math.round(this.y),this.z)}roundZ(){return new h(this.x,this.y,Math.round(this.z))}up(){return this.add(h.Up)}down(){return this.add(h.Down)}north(){return this.add(h.North)}south(){return this.add(h.South)}east(){return this.add(h.East)}west(){return this.add(h.West)}isZero(){return this.x===0&&this.y===0&&this.z===0}toArray(){return[this.x,this.y,this.z]}toDirection(){if(this.isZero())throw h.log.error(new Error("Cannot convert zero-length vector to direction")),new Error("Cannot convert zero-length vector to direction");let t=this.normalize(),o=Math.max(Math.abs(t.x),Math.abs(t.y),Math.abs(t.z));if(o===t.x)return A.East;if(o===-t.x)return A.West;if(o===t.y)return A.Up;if(o===-t.y)return A.Down;if(o===t.z)return A.North;if(o===-t.z)return A.South;throw h.log.error(new Error("Cannot convert vector to direction"),this),new Error("Cannot convert vector to direction")}toBlockLocation(){return h.from((this.x<<0)-(this.x<0&&this.x!==this.x<<0?1:0),(this.y<<0)-(this.y<0&&this.y!==this.y<<0?1:0),(this.z<<0)-(this.z<0&&this.z!==this.z<<0?1:0))}almostEqual(t,o,s,a){try{let l;return typeof t!="number"&&s===void 0?(l=h._from(t,void 0,void 0),a=o):l=h._from(t,o,s),Math.abs(this.x-l.x)<=a&&Math.abs(this.y-l.y)<=a&&Math.abs(this.z-l.z)<=a}catch{return!1}}equals(t,o,s){try{let a=h._from(t,o,s);return this.x===a.x&&this.y===a.y&&this.z===a.z}catch{return!1}}toString(t="long",o=", "){let s=`${this.x+o+this.y+o+this.z}`;return t==="long"?`Vec3(${s})`:s}},Dr=class Jt{static log=X.getLogger("Timings","timings");static lastTime=-1;static lastOperation="";static begin(t){this.end(),this.lastTime=new Date().getTime(),this.lastOperation=t}static end(){let t=new Date().getTime();this.lastTime>0&&Jt.log.debug(`Operation ${this.lastOperation} took ${t-this.lastTime}ms`),this.lastTime=-1}};var cr=X.getLogger("jobUtils","bedrock-boost","jobUtils");function Xt(e){return new Promise((t,o)=>{if($t.runJob)$t.runJob(function*(){for(;;)try{let{done:s,value:a}=e.next();if(s){t(a);return}else yield}catch(s){o(s);return}}());else{cr.warn("system.runJob is not available. Running job in an inefficient way.");let s=()=>{let a=Date.now();for(;;)try{let{done:l,value:y}=e.next();if(l){t(y);return}else if(Date.now()-a>4){$t.runTimeout(s,1);return}}catch(l){o(l);return}};s()}})}var Kr=X.getLogger("itemUtils","bedrock-boost","itemUtils");var lr=class ut{static log=X.getLogger("PulseScheduler","bedrock-boost","pulse-scheduler");items=[];period;currentTick=0;runId;nextIndex=0;executionSchedule=[];processor;constructor(t,o){if(o<=0)throw new Error("Period must be a positive integer.");if(!t||typeof t!="function")throw new Error("Processor function must be defined.");this.period=o,this.processor=t}add(t){this.push(t)}addAll(t){this.push(...t)}remove(t){t>=0&&t<this.items.length&&(this.items.splice(t,1),t<this.nextIndex&&this.nextIndex--,this.recalculateExecutionSchedule())}removeIf(t){for(let o=this.items.length-1;o>=0;o--)t(this.items[o])&&this.remove(o)}getItems(){return this.items}start(){this.stop(),this.currentTick=0,this.nextIndex=0,this.runId=Ht.runInterval(()=>this.tick(),1)}stop(){this.runId!==void 0&&(Ht.clearRun(this.runId),this.runId=void 0)}recalculateExecutionSchedule(){let t=this.items.length;if(this.executionSchedule=new Array(this.period).fill(0),t===0)return;let o=this.period/t;for(let s=0;s<t;s++)this.executionSchedule[Math.round(o*s)%this.period]++}tick(){if(this.items.length===0){ut.log.trace("No items to process.");return}let t=this.executionSchedule[this.currentTick];if(t===0){ut.log.trace("No items to process this tick."),this.currentTick=(this.currentTick+1)%this.period,this.currentTick===0&&(this.nextIndex=0);return}let o=0;for(;this.nextIndex<this.items.length&&o<t;this.nextIndex++){try{this.processor(this.items[this.nextIndex])}catch(s){ut.log.error("Error processing item",s)}o++}this.currentTick=(this.currentTick+1)%this.period,this.currentTick===0&&(this.nextIndex=0)}push(...t){return this.items.push(...t),this.recalculateExecutionSchedule(),this.items.length}pop(){let t=this.items.pop();return this.recalculateExecutionSchedule(),t}shift(){let t=this.items.shift();return this.recalculateExecutionSchedule(),t}unshift(...t){return this.items.unshift(...t),this.recalculateExecutionSchedule(),this.items.length}splice(t,o=0,...s){let a=this.items.splice(t,o,...s);return this.recalculateExecutionSchedule(),a}};var Jr=class Bt extends lr{static logger=X.getLogger("PlayerPulseScheduler","bedrock-boost","player-pulse-scheduler");constructor(t,o){super(s=>{s.isValid()?t(s):this.removeIf(a=>!a.isValid())},o),this.push(...at.getAllPlayers())}compareEntities(t,o){return t.id===o.id}start(){at.afterEvents.playerJoin.subscribe(t=>{let o=0,s=()=>{if(o++,o>10){Bt.logger.warn("Failed to push player to scheduler after 10 attempts.");return}try{let a=at.getEntity(t.playerId);a===void 0&&Zt.runTimeout(s,1),a instanceof fr&&this.push(a)}catch(a){Bt.logger.debug("Failed to push player to scheduler.",a),Zt.runTimeout(s,1)}};s()}),at.afterEvents.playerLeave.subscribe(t=>{this.removeIf(o=>!o.isValid()||o.id===t.playerId)}),super.start()}push(...t){let o=t.filter(s=>s.isValid()&&!this.items.some(a=>this.compareEntities(a,s)));return super.push(...o)}unshift(...t){let o=t.filter(s=>s.isValid()&&!this.items.some(a=>this.compareEntities(a,s)));return super.unshift(...o)}splice(t,o,...s){if(o===void 0)return super.splice(t);let a=s.filter(l=>!this.items.some(y=>this.compareEntities(y,l)));return super.splice(t,o,...a)}};function Kt(e){Xt(e()).then(()=>Kt(e))}var vt="sunbeam:weather";Gt.afterEvents.weatherChange.subscribe(e=>{e.dimension==="overworld"&&Gt.setDynamicProperty(vt,e.newWeather)});function ht(){return Gt.getDynamicProperty(vt)??mr.Clear}var yr=["minecraft:leather_helmet","minecraft:iron_helmet","minecraft:golden_helmet","minecraft:diamond_helmet","minecraft:netherite_helmet","minecraft:turtle_helmet","minecraft:chainmail_helmet"];function _t(e){for(let t of yr){let o=`testfor @s[hasitem={location=slot.armor.head,item=${t}}]`;if(e.runCommand(o).successCount===1)return!0}return!1}function Vt(e){let t=Math.cos(e.azimuth),o=Math.sin(e.azimuth),s=G.from([t,0,o,0,1,0,-o,0,t]),a=Math.cos(e.zenith),l=Math.sin(e.zenith),y=G.from([1,0,0,0,a,-l,0,l,a]);return G.mul(s,y)}var Wt;(l=>(l.Default={azimuth:0,zenith:Math.PI/4},l.Infectious={azimuth:.6,zenith:.951},l.Interstellar={azimuth:.813,zenith:.667},l.Seraphic={azimuth:3.5841,zenith:.785398},l.Vanilla={azimuth:0,zenith:0}))(Wt||={});var pr=Vt(Wt.Default);function gr(e,t,o){return Math.min(Math.max(e,t),o)}function xr(){let e=(dr.getTimeOfDay()+1e3)%24e3;return gr(e/14e3,0,1)}function ct(){let e=Math.PI*xr(),t=R.rotate(R.East,R.South,e);return G.mul(pr,t)}var K="sunbeam";function tr(e){let t=e.sourceEntity,o="";switch(e.id){case`${K}:help`:switch(e.message){case"dts":o=`\xA7edts:
Logs the current direction to sun vector.
\xA7rUsage:
 - /scriptevent ${K}:dts`;break;case"wt":o=`\xA7ewt:
Logs the currently stored weather value.
\xA7rUsage:
 - /scriptevent ${K}:wt`;break;default:o=`\xA72--- Showing help page 1 of 1 ---
\xA7r/scriptevent ${K}:help [command: CommandName]
/scriptevent ${K}:dts
/scriptevent ${K}:wt`}break;case`${K}:dts`:o=`Direction to Sun: {${R.toString(ct())}}`;break;case`${K}:wt`:o=`Get weather result: ${ht()}`;break}t.sendMessage(o)}import{system as br}from"@minecraft/server";import{EntityComponentTypes as Mr,MinecraftDimensionTypes as Er,WeatherType as zr,world as rr}from"@minecraft/server";var lt=rr.getDimension(Er.overworld);function wr(e){let t=ct(),o=e.location,s=e.getHeadLocation(),a={includeLiquidBlocks:!0};return lt.getBlockFromRay(o,t,a)===void 0||lt.getBlockFromRay(s,t,a)===void 0}function Ar(e){return e.hasComponent(Mr.OnFire)}function*er(){var e;if(!((rr.getTimeOfDay()+540)%24e3>=13082)&&ht()===zr.Clear)for(let t of lt.getEntities({families:["burns_in_sunlight"]}))!t||!t.isValid()||((e=lt.getBlock(t.location))==null?void 0:e.typeId)!=="minecraft:water"&&(Ar(t)||_t(t)||(wr(t)&&t.setOnFire(8,!0),yield))}br.afterEvents.scriptEventReceive.subscribe(tr);Kt(er);
//# sourceMappingURL=main.js.map